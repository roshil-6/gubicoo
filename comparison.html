<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    
    <!-- Primary SEO Meta Tags -->
    <title>Compare AI Tools Side-by-Side - Gubicoo</title>
    <meta name="description" content="Compare AI tools side-by-side. See pricing, features, and differences to make the best choice for your needs." />
    <meta name="robots" content="index, follow" />
    
    <!-- Favicon -->
    <link rel="icon" href="/favicon.ico" type="image/x-icon" />
    <link rel="icon" href="favicon/favicon.ico" type="image/x-icon" />
    <link rel="icon" href="favicon/favicon.png" type="image/png" />
    <link rel="icon" href="icon/gubicoo-logo.png.png" type="image/png" />
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&family=Noto+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
 <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap" rel="stylesheet">
    
    <!-- Styles -->
    <link rel="stylesheet" href="styles.css">
    <style>
        /* INLINE CRITICAL MOBILE CSS - Works even if external CSS fails */
        @media (max-width: 768px) {
            .desktop-only { display: none !important; visibility: hidden !important; }
            .mobile-only { display: block !important; visibility: visible !important; }
            #mobileCompareWrapper { 
                display: block !important; 
                visibility: visible !important; 
                opacity: 1 !important; 
                width: 100% !important; 
            }
        }
        @media (min-width: 769px) {
            .mobile-only { display: none !important; }
            .desktop-only { display: block !important; }
        }
    </style>
</head>
<body>
    <header class="site-header">
        <div class="container">
            <a href="index.html" class="back-link">‚Üê Back</a>
            <h1 class="site-title">Compare AI Tools</h1>
        </div>
  
    </header>

    <main class="main-content">
        <div class="container">
            <section id="compare-tools" class="compare-section">
                <h2 class="section-title">Compare AI Tools</h2>

                <!-- Desktop: Multi-tool comparison -->
                <div class="compare-controls desktop-only">
                    <div class="compare-selectors" id="toolSelectors">
                        <!-- Tool selectors will be added dynamically -->
                    </div>
                    <div class="compare-actions">
                        <button class="add-tool-btn" id="addToolBtn" title="Add another tool (max 5)">
                            <span class="material-symbols-outlined">add</span>
                            <span>Add Tool</span>
                        </button>
                    </div>
                </div>

                <!-- Desktop: Comparison table -->
                <div class="compare-table-wrapper desktop-only">
                    <table class="compare-table" id="compareTable">
                        <thead id="compareTableHead">
                            <tr>
                                <th>Feature</th>
                                <!-- Tool headers will be added dynamically -->
                            </tr>
                        </thead>
                        <tbody id="compareBody">
                            <tr>
                                <td colspan="2" class="compare-placeholder">
                                    <div class="placeholder-content">
                                        <span class="material-symbols-outlined">compare_arrows</span>
                                        <p>Select at least two tools to compare</p>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Mobile: Simple two-tool comparison -->
                <div class="mobile-compare-wrapper mobile-only" id="mobileCompareWrapper">
                    <div class="mobile-compare-selectors">
                        <div class="mobile-selector-group">
                            <label for="mobileToolA">Select Tool A</label>
                            <select id="mobileToolA" class="mobile-tool-select">
                                <option value="">Choose a tool...</option>
                            </select>
                        </div>
                        <div class="mobile-selector-group">
                            <label for="mobileToolB">Select Tool B</label>
                            <select id="mobileToolB" class="mobile-tool-select">
                                <option value="">Choose a tool...</option>
                            </select>
                        </div>
                    </div>

                    <div id="mobileComparisonResult" class="mobile-comparison-result">
                        <p class="mobile-placeholder">Select both tools to compare</p>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <footer class="site-footer">
        <div class="container">
            <p>&copy; 2024 gubicoo Lens. Honest comparisons, no fluff.</p>
        </div>
    </footer>

    <script src="script.js"></script>
    <script src="settings.js"></script>
    <script>
        // Simple initialization - CSS handles visibility
        document.addEventListener('DOMContentLoaded', () => {
            initMobileComparison();
            initDesktopComparison();
        });

        function initMobileComparison() {
            const toolA = document.getElementById('mobileToolA');
            const toolB = document.getElementById('mobileToolB');
            const resultDiv = document.getElementById('mobileComparisonResult');

            if (!toolA || !toolB || !resultDiv) return;

            fetch('/tools-data.json')
                .then(res => res.json())
                .then(data => {
                    if (!data || !data.tools) {
                        resultDiv.innerHTML = '<p>No tools found</p>';
                        return;
                    }

                    window.mobileComparisonData = data;

                    toolA.innerHTML = '<option value="">Choose a tool...</option>';
                    toolB.innerHTML = '<option value="">Choose a tool...</option>';

                    data.tools.forEach(tool => {
                        toolA.add(new Option(tool.name, tool.id));
                        toolB.add(new Option(tool.name, tool.id));
                    });

                    const update = () => renderMobileComparison(data);

                    // Safari-safe event binding
                    ['change', 'input'].forEach(evt => {
                        toolA.addEventListener(evt, update);
                        toolB.addEventListener(evt, update);
                    });
                })
                .catch(() => {
                    resultDiv.innerHTML = '<p>Failed to load tools</p>';
                });
        }

        function initDesktopComparison() {
            console.log('[DESKTOP COMPARISON] Initializing desktop comparison');
            // Desktop comparison logic (existing code)
            if (typeof loadMultiToolComparison === 'function') {
                loadMultiToolComparison();
            }
        }

        function renderMobileComparison(data) {
            const toolAEl = document.getElementById('mobileToolA');
            const toolBEl = document.getElementById('mobileToolB');
            const resultDiv = document.getElementById('mobileComparisonResult');
            
            if (!toolAEl || !toolBEl || !resultDiv) {
                return;
            }
            
            const toolAId = toolAEl.value;
            const toolBId = toolBEl.value;

            if (!toolAId || !toolBId) {
                resultDiv.innerHTML = '<p class="mobile-placeholder">Select both tools to compare</p>';
                return;
            }
            
            // Use stored data if available
            if (!data && window.mobileComparisonData) {
                data = window.mobileComparisonData;
            }
            
            if (!data || !data.tools) {
                resultDiv.innerHTML = '<p class="mobile-placeholder">Data not available. Please refresh.</p>';
                return;
            }

            const toolA = data.tools.find(function(t) { return t && t.id === toolAId; });
            const toolB = data.tools.find(function(t) { return t && t.id === toolBId; });

            if (!toolA || !toolB) {
                resultDiv.innerHTML = '<p class="mobile-placeholder">Tools not found</p>';
                return;
            }

            // Render comparison
            resultDiv.innerHTML = `
                <div class="mobile-tool-section">
                    <h3 class="mobile-tool-name">${escapeHtml(toolA.name)}</h3>
                    <div class="mobile-tool-info">
                        <div class="mobile-info-item">
                            <span class="mobile-info-label">Category:</span>
                            <span class="mobile-info-value">${escapeHtml(toolA.categoryName || getCategoryName(data, toolA.category) || 'N/A')}</span>
                        </div>
                        <div class="mobile-info-item">
                            <span class="mobile-info-label">Description:</span>
                            <span class="mobile-info-value">${escapeHtml(toolA.purpose || toolA.description || 'N/A')}</span>
                        </div>
                        <div class="mobile-info-item">
                            <span class="mobile-info-label">Pricing:</span>
                            <span class="mobile-info-value">${escapeHtml(getPricingType(toolA))}</span>
                        </div>
                        <div class="mobile-info-item">
                            <span class="mobile-info-label">Key Features:</span>
                            <span class="mobile-info-value">${getKeyFeatures(toolA)}</span>
                        </div>
                        <div class="mobile-info-item">
                            <span class="mobile-info-label">Should I Pay?</span>
                            <span class="mobile-info-value verdict">${escapeHtml(toolA.shouldIPay || 'N/A')}</span>
                        </div>
                    </div>
                </div>
                <div class="mobile-tool-section">
                    <h3 class="mobile-tool-name">${escapeHtml(toolB.name)}</h3>
                    <div class="mobile-tool-info">
                        <div class="mobile-info-item">
                            <span class="mobile-info-label">Category:</span>
                            <span class="mobile-info-value">${escapeHtml(toolB.categoryName || getCategoryName(data, toolB.category) || 'N/A')}</span>
                        </div>
                        <div class="mobile-info-item">
                            <span class="mobile-info-label">Description:</span>
                            <span class="mobile-info-value">${escapeHtml(toolB.purpose || toolB.description || 'N/A')}</span>
                        </div>
                        <div class="mobile-info-item">
                            <span class="mobile-info-label">Pricing:</span>
                            <span class="mobile-info-value">${escapeHtml(getPricingType(toolB))}</span>
                        </div>
                        <div class="mobile-info-item">
                            <span class="mobile-info-label">Key Features:</span>
                            <span class="mobile-info-value">${getKeyFeatures(toolB)}</span>
                        </div>
                        <div class="mobile-info-item">
                            <span class="mobile-info-label">Should I Pay?</span>
                            <span class="mobile-info-value verdict">${escapeHtml(toolB.shouldIPay || 'N/A')}</span>
                        </div>
                    </div>
                </div>
            `;
        }

        function getCategoryName(data, categoryId) {
            if (!data || !data.categories) return null;
            const category = data.categories.find(cat => cat && cat.id === categoryId);
            return category ? category.name : null;
        }

        function getPricingType(tool) {
            if (tool.pricingType) return tool.pricingType;
            if (tool.pricing) {
                if (tool.pricing.free && tool.pricing.free.available) {
                    return tool.pricing.paid ? 'Freemium' : 'Free';
                }
                return 'Paid';
            }
            return 'N/A';
        }

        function getKeyFeatures(tool) {
            if (tool.bestFor && Array.isArray(tool.bestFor) && tool.bestFor.length > 0) {
                return tool.bestFor.slice(0, 5).map(item => escapeHtml(item)).join(', ');
            }
            return 'N/A';
        }

        function escapeHtml(text) {
            if (!text) return '';
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }
    </script>
</body>
</html>
